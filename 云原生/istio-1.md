	#### CNCF 

​	Cloud Native Computing Foundation(CNCF)承载着全球技术基础设施的关键组件。CNCF汇集了世界顶级的开发人员、终端用户和供应商，并举办了最大的开源开发人员会议。CNCF是非营利的Linux基金会的一部分。 很多云原生相关的项目都加入了该组织，该组织越来越强大。官网：https://www.cncf.io/

​	微服务带来的问题：大量微服务的存在，服务治理难度增加，单个业务服务复杂度降低，系统整体复杂度上升（需要引入很多中间件解决此问题，rpc框架(dubbo,openfegin)，服务注册中心(nacos,apollo)，监控组件等）。 微服务将会带来很大的部署和管理成本

​	复杂度上升的根本问题是网络通信问题：服务治理（服务熔断，限流，降级，重试），负载均衡，集群容错，故障恢复，监控，流量控制，灰度发布，AB测试，身份验证等

​	解决办法：把通信问题交给专门的计算机网络模型组织解决，而不是业务系统解决。应该提供一套独立的，通用的，对于业务透明的，对业务代码无入侵的网络解决方案。

![image-20201228160725779](..\img\image-20201228160725779.png)





#### Service Mesh (服务网格)

很多公司借鉴代理模式推出了sidecar边车模式，这种Sidecar是为特定的基础设施而设计的，也就是跟公司原有的框架技术绑定在一起，不能成为通用性的产品.

> `sidecar模式：为每个服务提供一个proxy代理，服务的所有的进出流量都通过这个sidecar代理进行，也可以被称为边车模式（边车三轮摩托车）`

![image-20201228140628071](..\img\image-20201228140628071.png)

Service Mesh是专用的基础设施层，轻量级高性能网络代理。提供安全的、快速的、可靠地服务间通讯，与实际应用部署一起，但对应用透明

![image-20201228141103950](..\img\image-20201228141103950.png)



#### ServiceMesh项目-Linkerd	

![image-20201228141554846](..\img\image-20201228141554846.png)

　2016年1月，离开Twitter的基础设施工程师William Morgan和Oliver Gould，在github上发布了Linkerd 0.0.7版本，从而第一个Service Mesh项目由此诞生.	

​	Linkerd解决了通用性问题，在Linkerd思想要求所有的流量都走Sidecar，而原来的Sidecar方式可以走可以直连，这样一来Linkerd就帮业务人员屏蔽了通信细节，也不需要侵入到业务代码中，让业务开发者更加专注于业务本身。但是Linkerd的设计思想在传统运维方式中太难部署和维护了，又要部署服务，又要部署sidecar，所以就后来没有得到广泛的关注，其实主要的问题是Linkerd只是实现了数据层面的问题，但没有对其进行很好的管理。比较简单粗暴，但是他的思想是很好的。



#### ServiceMesh项目 - Istio

​	由Google、IBM和Lyft共同发起的开源项目，17年5月发布0.1 release版本，17年10月发布0.2 release版本，18年7月发布1.0 release版本. 

　基于SideCar模式（思想）、**数据平面和控制平台**、主流Service Mesh服务网格解决方案，也是一种服务网格Service Mesh。

<img src="..\img\50-997729541.png" alt="img" style="zoom: 80%;" />

k8s的pod中调度的就是docker的容器，通过Istion组件能解决微服务的 流量控制，安全，控制，监控等问题。

**Istio的真正价值？**

Istio的所有功能任何微服务框架，只要愿意往上面堆功能，早晚都可以实现这些，但是我们将会为此付出很大的工作成本，在没有Istio这样的服务网格的情况下，要如何开发我们的应用程序，才可以做到前面列出的这些丰富多彩的功能? 这数以几十记的各种特性，如何才可以加入到应用程序?

无外乎，找个Spring Cloud或者Dubbo的成熟框架，直接搞定服务注册，服务发现，负载均衡，熔断等基础功能。然后自己开发服务路由等高级功能， 接入Zipkin等Apm做全链路监控，自己做加密、认证、授权。 想办法搞定灰度方案，用Redis等实现限速、配额。 诸如此类，一大堆的事情， 都需要自己做，无论是找开源项目还是自己操刀，最后整出一个带有一大堆功能的应用程序，上线部署。然后给个配置说明到运维，告诉他说如何需要灰度，要如何如何， 如果要限速，配置哪里哪里。

要做到这些不是件容易的事情！更会有一些临时性需求，比如加个黑名单，做个特殊的灰度等等。这里就有一个很严肃的问题， 给每个业务程序的开发人员: 你到底想往你的业务程序里面塞多少管理和运维的功能? 就算你hold的住技术和时间，你有能力一个一个的满足各种运维和管理的需求吗？ 当你发现你开始疲于响应各种非功能性的需求时，就该开始反省了: 我们开发的是业务程序，它的核心价值在业务逻辑的处理和实现，将如此之多的时间精力花费在这些非业务功能上， 这真的合理吗? 而且即使是在实现层面，微服务实施时，最重要的是如何划分微服务，如何制定接口协议，你该如何分配你有限的时间和资源？

Istio 超越 spring cloud和dubbo 等传统开发框架之处， 就在于不仅仅带来了远超这些框架所能提供的功能， 而且也不需要应用程序为此做大量的改动， 开发人员也不必为上面的功能实现进行大量的知识储备









